<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <title>
    How do I run a Sinatra app using JRuby? // RubyLearning Blog
  </title>

  <link href="http://gmpg.org/xfn/11" rel="profile">
<meta http-equiv="content-type" content="text/html; charset=utf-8">


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<meta name="description" content="">
<meta name="googlebot" content="nofollow">
<meta name="keywords" content="">
<meta name="author" content="Satish Talim">


  <meta property="og:title" content="How do I run a Sinatra app using JRuby?" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="en_US" />
<meta property="og:url" content="http://rubylearning.com/blog/2011/09/03/how-do-i-run-a-sinatra-app-using-jruby/" />


  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/base-min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/pure-min.css">
  
  
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/grids-responsive-min.css">
  
  

  <link rel="stylesheet" href="http://rubylearning.com/blog//css/redlounge.css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link href='//fonts.googleapis.com/css?family=Raleway:400,200,100,700,300,500,600,800' rel='stylesheet' type='text/css'>
  <link href='//fonts.googleapis.com/css?family=Libre+Baskerville:400,700,400italic' rel='stylesheet' type='text/css'>

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="RubyLearning Blog" />

    
  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/styles/tomorrow-night-bright.min.css">
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>


  

  

  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', "UA-59044-10", 'auto');
  ga('send', 'pageview');
</script>

</head>

<body>
	

	<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
  <div class="header">
    

	

    <h1 class="brand-title">Ruby Learning</h1>
    <h2 class="brand-tagline">Not Just Ruby Any More!</h2>

    <nav class="nav">
      <ul class="nav-list">
        <li class="nav-item"><span class="nav-item-separator">//</span><a href="http://rubylearning.com/blog/">Home</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="http://rubylearning.com/">Hub</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="http://rubylearning.org">Online Course</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="http://satishtalim.com/">Satish</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="http://rubylearning.com/satishtalim/tutorial.html">Tutorial</a></li>
        
      </ul>
    </nav>

    

  </div>
</div>

	
	

    <div class="content pure-u-1 pure-u-md-3-4">
		<a name="top"></a>
		

		
			
	    
  		<section class="post">
            <h1 class="post-title">
              <a href="/blog/2011/09/03/how-do-i-run-a-sinatra-app-using-jruby/">How do I run a Sinatra app using JRuby?</a>
            </h1>
            <h3 class="post-subtitle">
            	
            </h3>
            
            	<span class="post-date">
                	<span class="post-date-day"><sup>3</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Sep</span> <span class="post-date-year">2011</span>
            	</span>
            	
            
            	
            		<span class="post-author-single">By <a class="post-author" href="http://satishtalim.com" target="">Satish Talim</a></span>
            		
      <span class="post-author-social post-author-facebook"><a href="http://www.facebook.com/satishtalim/about" target="_blank"><i class="fa fa-facebook"></i></a></span>


      <span class="post-author-social post-author-google-plus"><a href="https://plus.google.com/&#43;SatishTalim/about" target="_blank"><i class="fa fa-google-plus"></i></a></span>


      <span class="post-author-social post-author-linkedin"><a href="https://www.linkedin.com/in/satishtalim" target="_blank"><i class="fa fa-linkedin"></i></a></span>


	<span class="post-author-social post-author-twitter"><a href="http://twitter.com/IndianGuru" target="_blank"><i class="fa fa-twitter"></i></a></span>


            	
            

			
			
				<div class="post-categories">
				
					<a class="post-category post-category-jruby" href="http://rubylearning.com/blog//categories/jruby">JRuby</a>
				
					<a class="post-category post-category-ruby" href="http://rubylearning.com/blog//categories/ruby">Ruby</a>
				
					<a class="post-category post-category-sinatra" href="http://rubylearning.com/blog//categories/sinatra">Sinatra</a>
				
				</div>
			

			
		    	<div class="social-sharing">
	<a class="share-button-facebook" onClick="return popupShare(this.href);" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2frubylearning.com%2fblog%2f2011%2f09%2f03%2fhow-do-i-run-a-sinatra-app-using-jruby%2f" target="_blank"><i class="fa fa-facebook"><span>Like</span></i></a>
	<a class="share-button-google-plus" onClick="return popupShare(this.href);" href="https://plus.google.com/share?url=http%3a%2f%2frubylearning.com%2fblog%2f2011%2f09%2f03%2fhow-do-i-run-a-sinatra-app-using-jruby%2f" target="_blank"><i class="fa fa-google-plus"><span>Google +1</span></i></a>
	<a class="share-button-linkedin" onClick="return popupShare(this.href);" href="http://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2frubylearning.com%2fblog%2f2011%2f09%2f03%2fhow-do-i-run-a-sinatra-app-using-jruby%2f&title=How%20do%20I%20run%20a%20Sinatra%20app%20using%20JRuby%3f&summary=How%20do%20I%20run%20a%20Sinatra%20app%20using%20JRuby%3f%20RubyLearning%20is%20conducting%20a%20free%2c%20online%20JRuby%20101%20course%20%26%238211%3b%20the%20first%20of%20its%20kind%2c%20on%20Google%2b%20Some%20participants%20wanted%20an%20answer%20to%20their%20question%20%26%238220%3bHow%20do%20I%20run%20a%20Sinatra%20app%20using%20JRuby%3f%26%238221%3b%20This%20blog%20post%20explains%20the%20same.%20Read%20on.%20Pre-requisite%20I%20have%20a%20Windows%20XP%20box%20but%20the%20following%20should%20work%20on%20Mac%20and%20Linux-based%20computers%20too.%20Ensure%20that%20you%20have%20already%20installed%20JDK%206%2c%20JRuby%20and%20set%20the%20relevant%20system%20environment%20variables%20path%2c%20classpath%2c%20JAVA_HOME%20and%20JRUBY_HOME.}&source=RubyLearning%20Blog" target="_blank"><i class="fa fa-linkedin"><span>Share on LinkedIn</span></i></a>
	<a class="share-button-twitter" onClick="return popupShare(this.href);" href="http://twitter.com/share?text=How%20do%20I%20run%20a%20Sinatra%20app%20using%20JRuby%3f&url=http%3a%2f%2frubylearning.com%2fblog%2f2011%2f09%2f03%2fhow-do-i-run-a-sinatra-app-using-jruby%2f" target="_blank"><i class="fa fa-twitter"><span>Tweet</span></i></a>	
</div>
		    

			

            <div>
  <h2>
    How do I run a Sinatra app using JRuby?
  </h2>
  
  <p class="alert">
    RubyLearning is conducting a <a href="http://goo.gl/WZDl8">free, online JRuby 101 course</a> &#8211; the first of its kind, on Google+ Some participants wanted an answer to their question &#8220;<strong>How do I run a Sinatra app using JRuby?</strong>&#8221; This blog post explains the same. Read on.
  </p>
  
  <h3>
    Pre-requisite
  </h3>
  
  <p>
    I have a Windows XP box but the following should work on Mac and Linux-based computers too.
  </p>
  
  <p>
    Ensure that you have already installed JDK 6, JRuby and set the relevant system environment variables <b>path</b>, <b>classpath</b>, <b>JAVA_HOME</b> and <b>JRUBY_HOME</b>.
  </p>
  
  <h3>
    Install Bundler
  </h3>
  
  <p>
    <strong><a href="http://gembundler.com/">Bundler</a></strong> helps prevent conflicting or missing gems and shines when it&#8217;s time to configure those dependencies at install time and runtime.
  </p>
  
  <p>
    JRuby comes with a fairly loaded standard library from scratch but that does not mean there aren&#8217;t other things you&#8217;ll need. Almost all of them are installable as Gems. RubyGems is the premier package management tool for Ruby. It works fine with JRuby and JRuby ships with it. You use it through the gem command. We will need to run the JRuby version of the gem command and to ensure that, we use the <code>-S</code> flag to the interpreter.
  </p>
  
  <p>
    Create a project folder (say c:\jrubysinatra) on your hard-disk. Ensure that your internet connection is active. Now, open a command window in this project folder and type:
  </p>
  
  <pre>jruby -S gem install bundler
</pre>
  
  <p>
    <b>Note</b>: This approach (<code>jruby -S</code>) works for any Ruby command-line tool, including gem, rake, spec, and others.
  </p>
  
  <h3>
    Create a Gemfile
  </h3>
  
  <p>
    Next, in your project folder, create a <b>Gemfile</b>. It looks something like this:
  </p>
  
  <pre>source "http://rubygems.org"
gem 'sinatra'
</pre>
  
  <p>
    This Gemfile says a few things. First, it says that bundler should look for gems declared in the Gemfile at <a href="http://rubygems.org/">http://rubygems.org</a>. You can declare multiple Rubygems sources, and bundler will look for gems in the order you declared the sources. Next, you will have to list all your applications dependencies in there. Sinatra&#8217;s direct dependencies (Rack and Tilt) will, however, be automatically fetched and added by Bundler.
  </p>
  
  <p>
    To make bundler install the dependencies, in the already open command window, type:
  </p>
  
  <pre>jruby -S bundle install
</pre>
  
  <p>
    Because all the gems in your Gemfile have dependencies of their own (and some of those have their own dependencies), running <code>jruby -S bundle install</code> on the Gemfile above, will install quite a few gems. If any of the needed gems are already installed, Bundler will use them. After installing any needed gems to your system, bundler writes a snapshot of all the gems and versions that it installed to <b>Gemfile.lock</b>.
  </p>
  
  <h3>
    Write your Sinatra app
  </h3>
  
  <p>
    Create the file <b><a href="https://gist.github.com/1190382">hellojruby.rb</a></b> in the folder c:\jrubysinatra.
  </p>
  
  <pre>require "rubygems"
require "bundler/setup"

require "sinatra"

get '/hi' do
    "Hello JRuby World!"
end
</pre>
  
  <h3>
    Set up your Sinatra application to use Bundler
  </h3>
  
  <p>
    For your Sinatra application, you will need to set up bundler before trying to require any gems. At the top of the first file that your application loads (for Sinatra, the file that calls <code>require "sinatra"</code>), put the following code:
  </p>
  
  <pre>require "rubygems"
require "bundler/setup"
</pre>
  
  <p>
    This will automatically discover your Gemfile, and make all the gems in your Gemfile available to Ruby (in technical terms, it puts the gems &#8220;on the load path&#8221;). You can think of it as an adding some extra powers to require &#8220;rubygems&#8221;.
  </p>
  
  <p>
    Now that your code is available to Ruby, you can require the gems that you need. For instance, you can <code>require "sinatra"</code>.
  </p>
  
  <h3>
    Run your Sinatra application
  </h3>
  
  <p>
    In the already open command window, type:
  </p>
  
  <pre>jruby -S bundle exec jruby hellojruby.rb
</pre>
  
  <p>
    In the command window, you will see:
  </p>
  
  <pre>== Sinatra/1.2.6 has taken the stage on 4567 for development with backup from WEBrick
[2011-09-03 07:21:17] INFO  WEBrick 1.3.1
[2011-09-03 07:21:17] INFO  ruby 1.8.7 (2011-08-23) [java]
[2011-09-03 07:21:17] INFO  WEBrick::HTTPServer#start: pid=5128 port=4567
</pre>
  
  <h3>
    Access the Sinatra application
  </h3>
  
  <p>
    In your browser, visit the URL: <a href="http://localhost:4567/hi">http://localhost:4567/hi</a> &#8211; the browser shall display &#8220;<b>Hello JRuby World!</b>&#8220;
  </p>
  
  <p>
    That&#8217;s it for now.
  </p>
  
  <p class="alert">
    <em>Feel free to ask questions and give feedback in the comments section of this post.</em> Fellow Rubyists, if you would like to write a guest blog post for RubyLearning email me at <b>satish [at] rubylearning.org</b>
  </p>
</div>

	
			
		    	<div class="social-sharing">
	<a class="share-button-facebook" onClick="return popupShare(this.href);" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2frubylearning.com%2fblog%2f2011%2f09%2f03%2fhow-do-i-run-a-sinatra-app-using-jruby%2f" target="_blank"><i class="fa fa-facebook"><span>Like</span></i></a>
	<a class="share-button-google-plus" onClick="return popupShare(this.href);" href="https://plus.google.com/share?url=http%3a%2f%2frubylearning.com%2fblog%2f2011%2f09%2f03%2fhow-do-i-run-a-sinatra-app-using-jruby%2f" target="_blank"><i class="fa fa-google-plus"><span>Google +1</span></i></a>
	<a class="share-button-linkedin" onClick="return popupShare(this.href);" href="http://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2frubylearning.com%2fblog%2f2011%2f09%2f03%2fhow-do-i-run-a-sinatra-app-using-jruby%2f&title=How%20do%20I%20run%20a%20Sinatra%20app%20using%20JRuby%3f&summary=How%20do%20I%20run%20a%20Sinatra%20app%20using%20JRuby%3f%20RubyLearning%20is%20conducting%20a%20free%2c%20online%20JRuby%20101%20course%20%26%238211%3b%20the%20first%20of%20its%20kind%2c%20on%20Google%2b%20Some%20participants%20wanted%20an%20answer%20to%20their%20question%20%26%238220%3bHow%20do%20I%20run%20a%20Sinatra%20app%20using%20JRuby%3f%26%238221%3b%20This%20blog%20post%20explains%20the%20same.%20Read%20on.%20Pre-requisite%20I%20have%20a%20Windows%20XP%20box%20but%20the%20following%20should%20work%20on%20Mac%20and%20Linux-based%20computers%20too.%20Ensure%20that%20you%20have%20already%20installed%20JDK%206%2c%20JRuby%20and%20set%20the%20relevant%20system%20environment%20variables%20path%2c%20classpath%2c%20JAVA_HOME%20and%20JRUBY_HOME.}&source=RubyLearning%20Blog" target="_blank"><i class="fa fa-linkedin"><span>Share on LinkedIn</span></i></a>
	<a class="share-button-twitter" onClick="return popupShare(this.href);" href="http://twitter.com/share?text=How%20do%20I%20run%20a%20Sinatra%20app%20using%20JRuby%3f&url=http%3a%2f%2frubylearning.com%2fblog%2f2011%2f09%2f03%2fhow-do-i-run-a-sinatra-app-using-jruby%2f" target="_blank"><i class="fa fa-twitter"><span>Tweet</span></i></a>	
</div>
		    

			
				<div class="tags-list">
					<span class="dark-red">Tags</span><span class="decorative-marker">//</span>
					
	                <a class="post-tag post-tag-jruby" href="http://rubylearning.com/blog//tags/jruby">JRuby</a>,
	                
	                <a class="post-tag post-tag-programming" href="http://rubylearning.com/blog//tags/programming">programming</a>,
	                
	                <a class="post-tag post-tag-ruby" href="http://rubylearning.com/blog//tags/ruby">Ruby</a>,
	                
	                <a class="post-tag post-tag-ruby-programming" href="http://rubylearning.com/blog//tags/ruby-programming">ruby programming</a>,
	                
	                <a class="post-tag post-tag-sinatra" href="http://rubylearning.com/blog//tags/sinatra">Sinatra</a>,
	                
				</div>
			

			
				<div class="paging">
					<span class="paging-label">More Reading</span>
					
					<div class="paging-newer">
						<span class="dark-red">Newer</span><span class="decorative-marker">//</span>
						<a class="paging-link" href="/blog/2011/09/20/how-do-i-use-sinatra-to-access-the-google-api/">How do I use Sinatra to access the Google&#43; API?</a>
		            </div>
		            

					
					<div class="paging-older">
						<span class="dark-red">Older</span><span class="decorative-marker">//</span>
			            <a class="paging-link" href="/blog/2011/08/14/performance-testing-rails-applications-how-to/">Performance Testing Rails Applications: How To?</a>
		            </div>
		            
	            </div>
            
          </section>
          
          	<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'rubylearning';
    var disqus_identifier = 'http:\/\/rubylearning.com\/blog\/2011\/09\/03\/how-do-i-run-a-sinatra-app-using-jruby\/';
    var disqus_title = 'How do I run a Sinatra app using JRuby?';
    var disqus_url = 'http:\/\/rubylearning.com\/blog\/2011\/09\/03\/how-do-i-run-a-sinatra-app-using-jruby\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          
        
      <div class="footer">
	<hr class="thin" />
	<div class="pure-menu pure-menu-horizontal pure-menu-open">
		<ul class="footer-menu">
		
		</ul>
	</div>

	<p>&copy; 2015 RubyLearning. All rights reserved. </p>
</div>

    </div>
  </div>
	

	
		<script type="text/javascript">
			function popupShare(url) {
				window.open(url, '_blank', 'scrollbars,resizable,height=525,width=600');
				return false;
			}
		</script>
	

  
</body>
</html>
