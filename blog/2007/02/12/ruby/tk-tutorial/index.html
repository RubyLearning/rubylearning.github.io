<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <title>
    Ruby/Tk Tutorial // RubyLearning Blog
  </title>

  <link href="http://gmpg.org/xfn/11" rel="profile">
<meta http-equiv="content-type" content="text/html; charset=utf-8">


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<meta name="description" content="">
<meta name="googlebot" content="nofollow">
<meta name="keywords" content="">
<meta name="author" content="Satish Talim">


  <meta property="og:title" content="Ruby/Tk Tutorial" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="en_US" />
<meta property="og:url" content="http://rubylearning.com/blog/2007/02/12/ruby/tk-tutorial/" />


  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/base-min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/pure-min.css">
  
  
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/grids-responsive-min.css">
  
  

  <link rel="stylesheet" href="http://rubylearning.com/blog//css/redlounge.css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link href='//fonts.googleapis.com/css?family=Raleway:400,200,100,700,300,500,600,800' rel='stylesheet' type='text/css'>
  <link href='//fonts.googleapis.com/css?family=Libre+Baskerville:400,700,400italic' rel='stylesheet' type='text/css'>

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="RubyLearning Blog" />

    
  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/styles/tomorrow-night-bright.min.css">
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>


  

  

  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', "UA-59044-10", 'auto');
  ga('send', 'pageview');
</script>

</head>

<body>
	

	<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
  <div class="header">
    

	

    <h1 class="brand-title">Ruby Learning</h1>
    <h2 class="brand-tagline">Not Just Ruby Any More!</h2>

    <nav class="nav">
      <ul class="nav-list">
        <li class="nav-item"><span class="nav-item-separator">//</span><a href="http://rubylearning.com/blog/">Home</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="http://rubylearning.com/">Hub</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="http://rubylearning.org">Online Course</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="http://satishtalim.com/">Satish</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="http://rubylearning.com/satishtalim/tutorial.html">Tutorial</a></li>
        
      </ul>
    </nav>

    

  </div>
</div>

	
	

    <div class="content pure-u-1 pure-u-md-3-4">
		<a name="top"></a>
		

		
			
		    <div id="toc" class="pure-u-1 pure-u-md-1-4">
				<small class="toc-label">Contents</small>
		   	 	<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#ruby-tk:8033eaeeb7ab57fd4fde57fdd179865b">Ruby/Tk</a></li>
<li><a href="#simple-tk-applications:8033eaeeb7ab57fd4fde57fdd179865b">Simple Tk applications</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
		    </div>
		    
	    
  		<section class="post">
            <h1 class="post-title">
              <a href="/blog/2007/02/12/ruby/tk-tutorial/">Ruby/Tk Tutorial</a>
            </h1>
            <h3 class="post-subtitle">
            	
            </h3>
            
            	<span class="post-date">
                	<span class="post-date-day"><sup>12</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Feb</span> <span class="post-date-year">2007</span>
            	</span>
            	
            
            	
            		<span class="post-author-single">By <a class="post-author"  target="">Satish Talim</a></span>
            		




            	
            

			
			
				<div class="post-categories">
				
					<a class="post-category post-category-ruby" href="http://rubylearning.com/blog//categories/ruby">ruby</a>
				
				</div>
			

			

			

            

<h4 id="ruby-tk:8033eaeeb7ab57fd4fde57fdd179865b">Ruby/Tk</h4>

<p>Ruby/Tk provides Ruby with a graphical user interface (GUI). The Tk
extension works on Windows, Mac OS X and Unix systems.</p>

<p>Previous versions of the Ruby One-Click Installer contained an (old)
version of Tcl/Tk. Now this Ruby installer only contains the Ruby
bindings to whatever version of Tcl/Tk you wish to install. It’s
recommended to use
<a href="http://www.activestate.com/store/freedownload.aspx?prdGuid=f0cd6399-fefb-466e-ba17-220dcd6f4078">ActiveTcl</a>.
Download the file <code>ActiveTcl8.4.13.0.261555-win32-ix86-threaded.exe</code> and
install it. Reboot your PC.</p>

<h4 id="simple-tk-applications:8033eaeeb7ab57fd4fde57fdd179865b">Simple Tk applications</h4>

<p>Let’s understand the following program <code>hellotk.rb</code>:</p>

<pre><code>require 'tk'
hello = TkRoot.new {title &quot;Hello World&quot;}
Tk.mainloop
</code></pre>

<p>The <a href="http://www.jbrowse.com/text/rubytk_en.html">Tk documentation</a> shows
the class hierarchy. Briefly, the hierarchy is as follows:</p>

<p>Object-&gt;TclTkIp-&gt;TkKernel-&gt;TkObject-&gt;TkWindow-&gt;TkRoot\
Object-&gt;TclTkIp-&gt;TkKernel-&gt;TkObject-&gt;TkWindow-&gt;TkLabel-&gt;TkButton</p>

<p>There are many modules like:</p>

<ul>
<li><code>Tk</code></li>
<li><code>Tk::Wm</code></li>
</ul>

<p>and many others.</p>

<p><code>TkKernel</code> is the superclass of <code>TkObject</code>. The subclass redefines
the class method <code>new</code> to take a block.\
<code>TkObject</code> is the superclass of all widgets and has an included Tk
module.\
<code>TkRoot</code> class represents the root widget. The root widget is at the
top of the Ruby/Tk widget hierarchy and has the included module
<code>Tk::Wm</code> for communicating with a window manager. The methods
introduced here are normally used as instance methods of <code>TkRoot</code>.</p>

<p>In the program, after loading the tk extension module, we create a
root-level frame using <code>TkRoot.new</code>. With Tk you create widgets and
then bind code blocks to them. When something happens (like the user
clicking a widget), Tk runs the appropriate code block. In our program,
we use the <code>title</code> and <code>minsize</code> instance methods (of module
<code>Tk::Wm</code>) in the code block to <code>TkRoot.new</code>. We are now ready with
our GUI and we invoke <code>Tk.mainloop</code></p>

<p>Let us now add some widgets to the above program, namely a <code>TkLabel</code>.
The modified program is hellotk1.rb</p>

<pre><code>require 'tk'
hello = TkRoot.new do
  title &quot;Hello World&quot;
  # the min size of window
  minsize(400,400)
end
TkLabel.new(hello) do
  text 'Hello World'
  foreground 'red'
  pack { padx 15; pady 15; side 'left'}
end
Tk.mainloop
</code></pre>

<p>Here, we make a <code>TkLabel</code> widget (representing a label) as a child of
the root frame, setting several options for the label. Finally, we pack
the root frame and enter the main GUI event loop.</p>

<p>We also need to be able to get information back from our widgets while
our program is running by setting up callbacks (routines invoked when
certain events happen) and sharing data. The next example, hellotk2.rb
does that.</p>

<pre><code>require 'tk'
TkButton.new do
  text &quot;EXIT&quot;
  command { exit }
  pack('side'=&gt;'left', 'padx'=&gt;10, 'pady'=&gt;10)
end
Tk.mainloop
</code></pre>

<p>Callbacks are very easy to setup. The <code>command</code> option takes a
<code>Proc</code> object, which will be called when the callback fires. This
means that the code block passed into the command method is run when the
user clicks the button, allowing you to programmatically execute the
same functionality that would be invoked on an actual button press. Note
that the <code>Kernel\#exit</code> method terminates your program here.</p>

<p>We shall now build a rudimentary GUI interface to our SOAP server hosted
at www.puneruby.com. The program is the soapguiclient.rb</p>

<pre><code>require 'soap/rpc/driver'
require 'tk'

class SOAPGuiClient

  def connect
    @buttonconnect.configure('text' =&gt; 'Reset')
    @buttonconnect.command { reset }
    begin
      driver = SOAP::RPC::Driver.new('http://217.160.200.122:12321/',
                                     'urn:mySoapServer')
      driver.add_method('sayhelloto', 'username')
      s = driver.sayhelloto('Satish Talim')

    rescue Exception =&gt; e
      s = &quot;Exception occured: &quot; + e
    ensure
      @label.configure('text' =&gt; s)
    end
  end #connect

  def reset
    @label.configure('text' =&gt; &quot;&quot;)
    @buttonconnect.configure('text' =&gt; 'Connect')
    @buttonconnect.command { connect }
  end # reset

#---
  def initialize
    root = TkRoot.new do
      title 'SOAP Client'
      # the min size of window
      minsize(535, 100)
    end
#---
    @label = TkLabel.new(root) do
      pack
    end
#---
    @buttonconnect = TkButton.new(root)
    @buttonconnect.configure('text' =&gt; 'Connect')
    @buttonconnect.command { connect }
    @buttonconnect.pack('side'=&gt;'bottom')
#---
    Tk.mainloop
  end #initialize
end # class

SOAPGuiClient.new
#---
</code></pre>

<p>In the above program, we reconfigure a widget while it’s running. Every
widget supports the <code>configure</code> method, which takes a code block in
the same manner as <code>new</code>. We have also modified the soapserver.rb
program shown earlier to soapserver2.rb. We have included the <code>Logger</code>
class.</p>

<pre><code>require 'logger'
require 'soap/rpc/standaloneServer'

class MyServer &lt; SOAP::RPC::StandaloneServer
  def initialize(* args)
    super
    add_method(self, 'sayhelloto', 'username')
    @log = Logger.new(&quot;soapserver.log&quot;, 5, 10*1024)
  end

  def sayhelloto(username)
    t = Time.now
    @log.info(&quot;#{username} logged on #{t}&quot;)
    &quot;Hello, #{username} on #{t}.&quot;
  end
end

server = MyServer.new('PuneRubyServer', 'urn:mySoapServer', 'www.puneruby.com', 12321)
trap('INT') {server.shutdown}
server.start
</code></pre>

<p>The <code>Logger</code> class helps write log messages to a file or stream. It
supports time- or size-based rolling of log files. Messages can be
assigned severities, and only those messages at or above the logger&rsquo;s
current reporting level will be logged. Here, we log to a file called
soapserver.log, which is rotated when it gets about 10K bytes and keeps
up to five old files.</p>

<p>Technorati Tags: <a href="http://technorati.com/tag/Ruby%2FTk">Ruby/Tk</a>,
<a href="http://technorati.com/tag/Ruby%2FTk+Tutorial">Ruby/Tk Tutorial</a></p>

	
			

			

			
				<div class="paging">
					<span class="paging-label">More Reading</span>
					
					<div class="paging-newer">
						<span class="dark-red">Newer</span><span class="decorative-marker">//</span>
						<a class="paging-link" href="/blog/2007/02/13/ruby-video-search/">Ruby Video Search</a>
		            </div>
		            

					
					<div class="paging-older">
						<span class="dark-red">Older</span><span class="decorative-marker">//</span>
			            <a class="paging-link" href="/blog/2007/02/09/your-favourite-bit-of-ruby-code/">Your favourite bit of Ruby code?</a>
		            </div>
		            
	            </div>
            
          </section>
          
          	<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'rubylearning';
    var disqus_identifier = 'http:\/\/rubylearning.com\/blog\/2007\/02\/12\/ruby\/tk-tutorial\/';
    var disqus_title = 'Ruby\/Tk Tutorial';
    var disqus_url = 'http:\/\/rubylearning.com\/blog\/2007\/02\/12\/ruby\/tk-tutorial\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          
        
      <div class="footer">
	<hr class="thin" />
	<div class="pure-menu pure-menu-horizontal pure-menu-open">
		<ul class="footer-menu">
		
		</ul>
	</div>

	<p>&copy; 2015 RubyLearning. All rights reserved. </p>
</div>

    </div>
  </div>
	

	

  
</body>
</html>
